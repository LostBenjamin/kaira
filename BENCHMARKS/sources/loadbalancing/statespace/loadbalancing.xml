<project name="loadbalancing" root-directory="/home/bullseye/projects/kaira/samples/loadbalancing" target_env="C++"><configuration><parameter default="1" description="" name="JOBS" policy="mandatory" type="int" /><build-option name="LIBS" /><build-option name="CFLAGS">-O2</build-option><head-code>
int up(ca::Context &amp;ctx) {
	return (ctx.process_id() + 1) % ctx.process_count();
}

int down(ca::Context &amp;ctx) {
	return (ctx.process_id() - 1 + ctx.process_count()) % ctx.process_count();
}</head-code></configuration><description>&lt;project library-octave="False" library-rpc="False" target_env="C++"&gt;&lt;configuration&gt;&lt;parameter default="1" description="" name="JOBS" policy="mandatory" type="int" /&gt;&lt;build-option name="LIBS" /&gt;&lt;build-option name="CFLAGS"&gt;-O2&lt;/build-option&gt;&lt;head-code&gt;
int up(ca::Context &amp;amp;ctx) {
	return (ctx.process_id() + 1) % ctx.process_count();
}

int down(ca::Context &amp;amp;ctx) {
	return (ctx.process_id() - 1 + ctx.process_count()) % ctx.process_count();
}&lt;/head-code&gt;&lt;/configuration&gt;&lt;net id="101" name="loadbalancing"&gt;&lt;area id="144" sx="129" sy="86" x="-693" y="-205"&gt;&lt;init x="-672" y="-222"&gt;ctx.all_processes()&lt;/init&gt;&lt;/area&gt;&lt;area id="145" sx="92" sy="68" x="-252" y="-102"&gt;&lt;init x="-252" y="-117"&gt;ctx.all_processes()&lt;/init&gt;&lt;/area&gt;&lt;place id="119" label-x="-216" label-y="-66" name="119" radius="20" sx="18" sy="0" x="-216" y="-66"&gt;&lt;place-type x="-186" y="-54"&gt;int&lt;/place-type&gt;&lt;init x="-199" y="-96" /&gt;&lt;code&gt;	for (int i = 0; i &amp;lt; param::JOBS(); i++) {
		place.add(ctx.process_id() * param::JOBS() + i);
	}
&lt;/code&gt;&lt;trace trace-tokens="False" /&gt;&lt;/place&gt;&lt;place id="127" label-x="-468" label-y="30" name="127" radius="20" sx="30" sy="0" x="-468" y="30"&gt;&lt;place-type x="-432" y="48"&gt;int&lt;/place-type&gt;&lt;init x="-451" y="0" /&gt;&lt;trace trace-tokens="False" /&gt;&lt;/place&gt;&lt;place id="134" label-x="-630" label-y="-156" name="134" radius="20" sx="6" sy="0" x="-630" y="-156"&gt;&lt;place-type x="-624" y="-138"&gt;int&lt;/place-type&gt;&lt;init x="-678" y="-192"&gt;[down(ctx); up(ctx)]&lt;/init&gt;&lt;trace trace-tokens="False" /&gt;&lt;/place&gt;&lt;place id="138" label-x="-36" label-y="30" name="138" radius="20" sx="30" sy="0" x="-36" y="30"&gt;&lt;place-type x="12" y="42"&gt;int&lt;/place-type&gt;&lt;init x="-19" y="0" /&gt;&lt;trace trace-tokens="False" /&gt;&lt;/place&gt;&lt;transition clock="False" collective="False" id="116" label-x="-19" label-y="-66" name="116" priority="3" sx="70" sy="36" x="-54" y="-84"&gt;&lt;guard x="-54" y="-104" /&gt;&lt;/transition&gt;&lt;transition clock="False" collective="False" id="117" label-x="-451" label-y="-66" name="117" priority="4" sx="70" sy="36" x="-486" y="-84"&gt;&lt;guard x="-486" y="-104" /&gt;&lt;/transition&gt;&lt;transition clock="False" collective="False" id="131" label-x="-643" label-y="-66" name="131" priority="1" sx="100" sy="36" x="-678" y="-84"&gt;&lt;guard x="-678" y="-104" /&gt;&lt;/transition&gt;&lt;transition clock="False" collective="False" id="140" label-x="-361" label-y="30" name="140" priority="2" sx="70" sy="36" x="-396" y="12"&gt;&lt;guard x="-396" y="-8" /&gt;&lt;code&gt;	ctx.quit();
&lt;/code&gt;&lt;/transition&gt;&lt;edge from_item="119" id="120" to_item="116"&gt;&lt;inscription x="-129.0" y="-84.0"&gt;job&lt;/inscription&gt;&lt;/edge&gt;&lt;edge from_item="119" id="126" to_item="117"&gt;&lt;inscription x="-373.0" y="-84.0"&gt;[guard(size &amp;gt; 2)]job&lt;/inscription&gt;&lt;/edge&gt;&lt;edge from_item="127" id="130" to_item="117"&gt;&lt;inscription x="-445.0" y="-18.0"&gt;neighbor&lt;/inscription&gt;&lt;/edge&gt;&lt;edge from_item="131" id="132" to_item="127"&gt;&lt;inscription x="-624.0" y="12.0"&gt;ctx.process_id()@neighbor&lt;/inscription&gt;&lt;point x="-630" y="30" /&gt;&lt;/edge&gt;&lt;edge from_item="117" id="133" to_item="119"&gt;&lt;inscription x="-360.0" y="-162.0"&gt;job@neighbor&lt;/inscription&gt;&lt;point x="-408" y="-144" /&gt;&lt;point x="-252" y="-144" /&gt;&lt;/edge&gt;&lt;edge from_item="134" id="135" to_item="131"&gt;&lt;inscription x="-621.0" y="-113.0"&gt;neighbor&lt;/inscription&gt;&lt;/edge&gt;&lt;edge from_item="117" id="136" to_item="134"&gt;&lt;inscription x="-595.0" y="-150.0"&gt;ctx.process_id()@neighbor&lt;/inscription&gt;&lt;point x="-450" y="-156" /&gt;&lt;/edge&gt;&lt;edge from_item="116" id="139" to_item="138"&gt;&lt;inscription x="-13.0" y="-24.0"&gt;job@0&lt;/inscription&gt;&lt;/edge&gt;&lt;edge from_item="138" id="141" to_item="140"&gt;&lt;inscription x="-324.0" y="12.0"&gt;[guard(size == param::JOBS() * ctx.process_count())]&lt;/inscription&gt;&lt;/edge&gt;&lt;/net&gt;&lt;/project&gt;</description><net id="101" name="loadbalancing"><place id="119" init-expr="" name="119" type="int"><code>	for (int i = 0; i &lt; param::JOBS(); i++) {
		place.add(ctx.process_id() * param::JOBS() + i);
	}
</code></place><place id="127" init-expr="" name="127" type="int" /><place id="134" init-expr="[down(ctx); up(ctx)]" name="134" type="int" /><place id="138" init-expr="" name="138" type="int" /><transition clock="False" collective="False" guard="" id="116" name="116" priority="3"><edge-in expr="job" id="120" place-id="119" /><edge-out expr="job@0" id="139" place-id="138" /></transition><transition clock="False" collective="False" guard="" id="117" name="117" priority="4"><edge-in expr="[guard(size &gt; 2)]job" id="126" place-id="119" /><edge-in expr="neighbor" id="130" place-id="127" /><edge-out expr="job@neighbor" id="133" place-id="119" /><edge-out expr="ctx.process_id()@neighbor" id="136" place-id="134" /></transition><transition clock="False" collective="False" guard="" id="131" name="131" priority="1"><edge-in expr="neighbor" id="135" place-id="134" /><edge-out expr="ctx.process_id()@neighbor" id="132" place-id="127" /></transition><transition clock="False" collective="False" guard="" id="140" name="140" priority="2"><code>	ctx.quit();
</code><edge-in expr="[guard(size == param::JOBS() * ctx.process_count())]" id="141" place-id="138" /></transition><area id="144" init-expr="ctx.all_processes()" name=""><place id="134" /></area><area id="145" init-expr="ctx.all_processes()" name=""><place id="119" /></area></net></project>